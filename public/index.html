<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yeeterm - Web Terminal Emulator</title>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css"
/>
<style>
  body, html {
    margin: 0;
    height: 100%;
    background: #000;
  }
  #terminal {
    height: 100vh;
    width: 100vw;
  }
</style>
</head>
<body>
<div id="terminal"></div>

<script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
<script>
  const term = new Terminal();
  const fitAddon = new FitAddon.FitAddon();
  term.loadAddon(fitAddon);

  term.open(document.getElementById('terminal'));
  fitAddon.fit();

  const protocol = window.location.protocol === 'https:' ? 'wss://' : 'ws://';
  const socketURL = protocol + window.location.hostname + ':' + location.port;
  const socket = new WebSocket(socketURL);

  socket.onopen = () => {
    term.write('\x1b[32mWelcome to Yeeterm!\x1b[m\r\n');
    term.focus();
  };

  socket.onmessage = (event) => {
    term.write(event.data);
  };

  socket.onclose = () => {
    term.write('\r\n\x1b[31mConnection closed\x1b[m');
  };

  term.onData(data => {
    socket.send(data);
  });

  window.addEventListener('resize', () => {
    fitAddon.fit();
  });
</script>
</body>
</html>